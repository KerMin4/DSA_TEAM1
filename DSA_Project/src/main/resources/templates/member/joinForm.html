<!DOCTYPE html>
<html xmlns:th="thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>회원가입</title>
<script th:src = "@{/js/jquery-3.7.1.min.js}"></script>
<style>
	.step{
		display : none; 
	}
	.step.active {
		display : block;
	}

</style>
<script>
	$(document).ready(function(){
		var formData = {};
		$('#nextStep1').click(function(){
			var selectedInterests = [];
			$('input[name="interests"]:checked').each(function(){
				selectedInterests.push($(this).val());
			});
			
			if(selectedInterests.length > 0 && selectedInterests.length <= 5){
				formData.interests = selectedInterests;
				$('#step1').removeClass('active');
				$('#step2').addClass('active');
			} else if(selectedInterests.length == 0){
				alert("최소한 하나의 취향을 선택해 주세요.");
			} else {
				alert("취향은 다섯 개 까지 선택가능해요.");
				selectedInterests = [];
				return;
			}
			// alert(selectedInterests);	 testing for array
		});
		
		$('#nextStep2').click(function(){
			var location = $('#location').val();
			if(location){
				formData.location = location;
				$('#step2').removeClass('active');
				$('#step3').addClass('active');
			} else{
				alert("관심 지역을 입력해 주세요.");
			}
		});
		
		$('#submitForm').click(function(){
			var userid = $('#userid').val();
			var password = $('#password').val();
			var password2 = $('#password2').val();
			var phone = $('#phone').val();
			var email = $('#email').val();
			
			if(!userid || !password || !password2 || !phone || !email){
				alert("모든 정보를 입력해 주세요.");
				return;
			}
			
			if(password !== password2){
				alert("비밀번호가 일치하지 않습니다.");
				return;
			}
			
			formData.userid = userid;
			formData.password = password;
			formData.phone = phone;
			formData.email = email;
		});
	});
</script>
</head>
<body>
    <div class="step active" id="step1">
        <h2>요즘 뭐에 빠져있나요? 당신의 취향을 알려주세요!</h2>
        <p style = "color: gray;">(관심사는 최대 5개까지 선택 가능해요.)</p>
        <form id="form-step1">
            <input type="checkbox" name="interests" value="취미"> 취미<br>
            <input type="checkbox" name="interests" value="자기계발"> 자기계발<br>
            <input type="checkbox" name="interests" value="푸드"> 푸드<br>
            <input type="checkbox" name="interests" value="액티비티"> 액티비티<br>
            <input type="checkbox" name="interests" value="반려동물"> 반려동물<br>
            <input type="checkbox" name="interests" value="문화"> 문화<br>
            <input type="checkbox" name="interests" value="재테크"> 재테크<br>
            <input type="checkbox" name="interests" value="연애"> 연애<br>
            <input type="checkbox" name="interests" value="게임"> 게임<br>
            <input type="checkbox" name="interests" value="여행"> 여행<br>
            <button type="button" id="nextStep1">다음 페이지</button>
        </form>
    </div>

    <div class="step" id="step2">
        <h2>어디에서 살펴볼까요? 관심 지역을 선택해주세요!</h2>
        <form id="form-step2">
            <input type="text" id="location" name="location" placeholder="관심 지역 입력"><br>
            <button type="button" id="nextStep2">다음 페이지</button>
        </form>
    </div>

    <div class="step" id="step3">
        <h2>이제 거의 다 왔어요!</h2>
        <form id="form-step3">
            <input type="text" id="userid" name="userid" placeholder="아이디"><br>
            <input type="password" id="password" name="password" placeholder="비밀번호"><br>
            <input type="password" id="password2" name="password2" placeholder="비밀번호 확인"><br>
            <input type="text" id="phone" name="phone" placeholder="휴대전화"><br>
            <button type="button" id="submitForm">가입하기</button>
        </form>
    </div>
</body>
</html>